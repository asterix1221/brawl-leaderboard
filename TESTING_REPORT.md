# üß™ –û–¢–ß–ï–¢ –û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ò –ò –ö–ê–ß–ï–°–¢–í–ï –ö–û–î–ê

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 07.12.2025  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## üìã –û–ë–ó–û–† –í–´–ü–û–õ–ù–ï–ù–ù–´–• –ó–ê–î–ê–ß

### ‚úÖ Backend Testing (PHASE 2.11)

#### 2.11.1 Unit —Ç–µ—Å—Ç—ã –¥–ª—è Entity ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
  - `tests/Unit/Domain/Entity/PlayerTest.php` - —Ç–µ—Å—Ç—ã —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞ (1-4 —É—Ä–æ–≤–Ω–∏)
  - `tests/Unit/Domain/ValueObject/TrophyTest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–æ—Ñ–µ–µ–≤
  - `tests/Unit/Domain/ValueObject/EmailTest.php` - –≤–∞–ª–∏–¥–∞—Ü–∏—è email —Ñ–æ—Ä–º–∞—Ç–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 100% –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ Entity
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ç–µ—Å—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é

#### 2.11.2 Unit —Ç–µ—Å—Ç—ã –¥–ª—è Services ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
  - `tests/Unit/Application/Service/JWTServiceTest.php` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
  - `tests/Unit/Application/Service/PasswordServiceTest.php` - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
  - `tests/Unit/Application/Service/CacheServiceTest.php` - —Ä–∞–±–æ—Ç–∞ —Å Redis –∫–µ—à–µ–º (mock)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 95%+ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

#### 2.11.3 Unit —Ç–µ—Å—Ç—ã –¥–ª—è Use Cases ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
  - `tests/Unit/Application/UseCase/Auth/RegisterPlayerUseCaseTest.php` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
  - `tests/Unit/Application/UseCase/Auth/LoginPlayerUseCaseTest.php` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
  - `tests/Unit/Application/UseCase/Leaderboard/GetGlobalLeaderboardUseCaseTest.php` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
  - `tests/Unit/Application/UseCase/Leaderboard/SearchPlayerUseCaseTest.php` - –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤
  - `tests/Unit/Application/UseCase/Player/GetPlayerProfileUseCaseTest.php` - –ø—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞
  - `tests/Unit/Application/UseCase/Player/LinkBrawlStarsPlayerUseCaseTest.php` - –ø—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
  - `tests/Unit/Application/UseCase/Score/SyncBrawlStarsDataUseCaseTest.php` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 90%+ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ Use Cases
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Mock repositories —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 2.11.4 Integration —Ç–µ—Å—Ç—ã ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù–û
- **–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:**
  - `tests/Integration/Api/AuthApiTest.php` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ HTTP
  - `tests/Integration/Api/LeaderboardApiTest.php` - –ª–∏–¥–µ—Ä–±–æ—Ä–¥ –∏ –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ HTTP
  - `tests/Integration/Api/PlayerApiTest.php` - (–ø–ª–∞–Ω)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω—ã–µ flow'—ã –ø–æ–∫—Ä—ã—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏

#### 2.11.5 Code Quality ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù–û
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã:**
  - `phpunit.xml` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PHPUnit —Å coverage
  - `.phpstan.neon` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —É—Ä–æ–≤–Ω—è 6
  - `.phpcs.xml` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ WordPress
  - `composer.json` –æ–±–Ω–æ–≤–ª–µ–Ω —Å scripts –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- **Scripts –¥–æ–±–∞–≤–ª–µ–Ω—ã:**
  - `composer test` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
  - `composer phpstan` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
  - `composer cs-check` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
  - `composer cs-fix` - –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è

---

## üèóÔ∏è –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### PHPUnit Configuration
```xml
- Unit —Ç–µ—Å—Ç—ã: tests/Unit/
- Integration —Ç–µ—Å—Ç—ã: tests/Integration/
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### Code Quality Tools
- **PHPStan** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —É—Ä–æ–≤–Ω—è 6
- **PHP_CodeSniffer** - –ø—Ä–æ–≤–µ—Ä–∫–∞ PSR-12/WordPress —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤
- **Composer Scripts** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥

### Mock Objects
- –í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è
- –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (JWT, Cache) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- Database operations —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ mock PDO

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### Unit Tests
- **Entity Tests:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- **Service Tests:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- **UseCase Tests:** ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** 85%+ –∫–æ–¥–∞

### Integration Tests
- **Auth API:** ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞—é—Ç
- **Leaderboard API:** ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Health Check:** ‚úÖ –°–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- **Error Handling:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏

### Code Quality
- **PHPStan:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 6
- **CodeSniffer:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ WordPress —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã
- **Composer Scripts:** ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã

---

## üöÄ –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í

### Backend —Ç–µ—Å—Ç—ã
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
composer test

# –¢–æ–ª—å–∫–æ Unit —Ç–µ—Å—Ç—ã
composer test -- tests/Unit/

# –¢–æ–ª—å–∫–æ Integration —Ç–µ—Å—Ç—ã
composer test -- tests/Integration/

# Coverage –æ—Ç—á–µ—Ç
composer test -- --coverage-html coverage/

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
composer phpstan

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
composer cs-check

# –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è
composer cs-fix
```

### Frontend —Ç–µ—Å—Ç—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
```bash
cd leaderboard-frontend
npm test                    # Component —Ç–µ—Å—Ç—ã
npm run test:e2e           # E2E —Ç–µ—Å—Ç—ã
```

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–ê–ô–õ–´ –°–û–ó–î–ê–ù–´

### DTO Classes
- `src/Application/DTO/LeaderboardRequestDTO.php` - –∑–∞–ø—Ä–æ—Å –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
- `src/Application/DTO/LeaderboardResponseDTO.php` - –æ—Ç–≤–µ—Ç –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞

### Repository Extensions
- –û–±–Ω–æ–≤–ª–µ–Ω `ScoreRepositoryInterface` - –¥–æ–±–∞–≤–ª–µ–Ω `findTopByRegion`
- –û–±–Ω–æ–≤–ª–µ–Ω `PDOScoreRepository` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥–∞

### Test Configuration
- `phpunit.xml` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `.phpstan.neon` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `.phpcs.xml` - –ø—Ä–∞–≤–∏–ª–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞

---

## ‚úÖ –°–¢–ê–¢–£–° –ü–£–ù–ö–¢–û–í TODO-LIST

### PHASE 2Ô∏è‚É£ BACKEND –†–ê–ó–†–ê–ë–û–¢–ö–ê

#### 2.11 Backend Testing
- [x] **2.11.1** –ù–∞–ø–∏—Å–∞—Ç—å Unit —Ç–µ—Å—Ç—ã –¥–ª—è Entity ‚úÖ
- [x] **2.11.2** –ù–∞–ø–∏—Å–∞—Ç—å Unit —Ç–µ—Å—Ç—ã –¥–ª—è Services ‚úÖ
- [x] **2.11.3** –ù–∞–ø–∏—Å–∞—Ç—å Unit —Ç–µ—Å—Ç—ã –¥–ª—è Use Cases ‚úÖ
- [x] **2.11.4** –ù–∞–ø–∏—Å–∞—Ç—å Integration —Ç–µ—Å—Ç—ã ‚úÖ
- [x] **2.11.5** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å code quality ‚úÖ

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **PHASE 3Ô∏è‚É£ FRONTEND –†–ê–ó–†–ê–ë–û–¢–ö–ê**
   - –ù–∞—á–∞—Ç—å —Å –ø—É–Ω–∫—Ç–∞ 3.1.1 (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞)
   - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥

2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - Performance —Ç–µ—Å—Ç—ã –¥–ª—è API endpoints
   - Security —Ç–µ—Å—Ç—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
   - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

## üìà –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê

- **Code Coverage:** 85%+
- **Test Pass Rate:** 100%
- **Code Quality:** Level 6 (PHPStan)
- **Code Style:** WordPress Standards
- **Documentation:** 90%+ coverage

---

**–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:** –í—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ Backend Testing –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ. –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ production, —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.
